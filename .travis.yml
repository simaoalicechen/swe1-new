language: python
python:
  - 3.7
script: 
  - python manage.py migrate
  - python manage.py collectstatic --noinput
install:
  - pip install -r requirements.txt
  - pip install black
  - pip install flake8
  - pip install coverage
  - pip install coveralls
script:
  - black --check .
  - black --check .
  - flake8 .
  # - coverage run --source=ebdjango,polls manage.py test
  - coverage run -a --source="." manage.py
cache: 
  Expires: 0
  Pragma: no-cache
after_success:
  - coveralls
deploy:
  - provider: elasticbeanstalk
    access_key_id: AKIAVQZPIVYUF6UDMH6I
    secret_access_key: ga2u0!f%3(q!lcn_+uw-+(tn^lqls*5tjau#iuwt%c3a=y0a(6
    region: 'us-east-1'
    app: 'django-tutorial'
    env: 'django-env'
    bucket_name: 'elasticbeanstalk-us-east-1-379666869800'
    on:
      # repo: simaoalicechen/swe1-new
      branch: main
    skip_cleanup: true